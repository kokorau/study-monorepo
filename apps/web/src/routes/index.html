<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Study Monorepo - Web App</title>
    <style>
      body {
        font-family: system-ui, -apple-system, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
        line-height: 1.6;
        color: #333;
        background: #f8f9fa;
      }
      h1 { color: #2563eb; margin-bottom: 1rem; }
      h2 { color: #374151; margin-top: 2rem; }
      .card {
        background: white;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        margin: 1rem 0;
      }
      .nav-links {
        display: flex;
        gap: 1rem;
        margin: 1.5rem 0;
        flex-wrap: wrap;
      }
      .nav-links a {
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background: #2563eb;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        transition: background 0.2s;
      }
      .nav-links a:hover {
        background: #1d4ed8;
      }
      .description {
        color: #6b7280;
        margin-bottom: 1rem;
      }
      ul { padding-left: 1.5rem; }
      li { margin: 0.5rem 0; }
    </style>
  </head>
  <body>
    <div id="app">
      <div id="auth-header" style="display: none; text-align: right; margin-bottom: 1rem; padding: 1rem; background: #e5f3ff; border-radius: 8px;">
        <span id="user-info"></span>
        <button id="signout-btn" style="margin-left: 1rem; padding: 0.5rem 1rem; background: #dc2626; color: white; border: none; border-radius: 4px; cursor: pointer;">Sign Out</button>
      </div>
      
      <h1>ğŸ¯ Study Monorepo</h1>
      
      <div class="card">
        <h2>ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¦‚è¦</h2>
        <p class="description">
          ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ãƒ¢ãƒãƒ¬ãƒé–‹ç™ºãƒ‘ã‚¿ãƒ¼ãƒ³ã®å­¦ç¿’ã¨å®Ÿè·µã‚’ç›®çš„ã¨ã—ãŸç ”ç©¶ç”¨ãƒªãƒã‚¸ãƒˆãƒªã§ã™ã€‚
          è¤‡æ•°ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ±åˆç®¡ç†ã—ã€åŠ¹ç‡çš„ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚
        </p>
        
        <h3>ğŸ—ï¸ æ§‹æˆ</h3>
        <ul>
          <li><strong>packages/react/</strong> - React + TypeScript + Vite ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</li>
          <li><strong>packages/vue/</strong> - Vue 3 + TypeScript + Vite ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</li>
          <li><strong>packages/auth/</strong> - å…±é€šèªè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼‰</li>
          <li><strong>apps/web/</strong> - ãƒãƒ«ãƒã‚¨ãƒ³ãƒˆãƒªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã“ã®ãƒšãƒ¼ã‚¸ï¼‰</li>
        </ul>

        <h3>âš¡ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</h3>
        <ul>
          <li>Package Manager: <strong>pnpm workspaces</strong></li>
          <li>Build Tool: <strong>Vite</strong></li>
          <li>Language: <strong>TypeScript</strong></li>
          <li>Frameworks: <strong>React</strong>, <strong>Vue 3</strong></li>
          <li>Authentication: <strong>localStorage ãƒ™ãƒ¼ã‚¹ç°¡æ˜“èªè¨¼</strong></li>
        </ul>
      </div>

      <div class="card">
        <h2>ğŸš€ ãƒšãƒ¼ã‚¸ä¸€è¦§</h2>
        <p class="description">å„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å®Ÿè£…ä¾‹ã‚’ç¢ºèªã§ãã¾ã™</p>
        
        <div class="nav-links">
          <a href="/vue/">ğŸŸ¢ Vue ã‚¢ãƒ—ãƒª</a>
          <a href="/react/">ğŸ”µ React ã‚¢ãƒ—ãƒª</a>
          <a href="/about/">ğŸ“– About</a>
          <a href="/signin/">ğŸ” Sign In</a>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ¯ å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ</h2>
        <ul>
          <li>ãƒ¢ãƒãƒ¬ãƒã«ã‚ˆã‚‹è¤‡æ•°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®çµ±åˆç®¡ç†</li>
          <li>pnpm workspacesã‚’æ´»ç”¨ã—ãŸä¾å­˜é–¢ä¿‚ç®¡ç†</li>
          <li>Viteã«ã‚ˆã‚‹é«˜é€Ÿãƒ“ãƒ«ãƒ‰ç’°å¢ƒã®æ§‹ç¯‰</li>
          <li>TypeScriptã«ã‚ˆã‚‹å‹å®‰å…¨ãªé–‹ç™º</li>
          <li>è¤‡æ•°ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å…±å­˜ã¨ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–</li>
          <li>å‹•çš„ãƒ«ãƒ¼ãƒˆç”Ÿæˆã«ã‚ˆã‚‹é–‹ç™ºåŠ¹ç‡åŒ–</li>
          <li>å…±é€šèªè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“é€£æº</li>
          <li>dependency-freeãªPlain HTMLãƒšãƒ¼ã‚¸ã¨ã®å…±å­˜</li>
        </ul>
      </div>
    </div>

    <script type="module">
      import { auth } from '@study-monorepo/auth';
      
      const authHeader = document.getElementById('auth-header');
      const userInfo = document.getElementById('user-info');
      const signoutBtn = document.getElementById('signout-btn');
      
      // èªè¨¼çŠ¶æ…‹ã‚’ç¢ºèª
      function checkAuth() {
        if (auth.isAuthenticated()) {
          const user = auth.getCurrentUser();
          authHeader.style.display = 'block';
          userInfo.textContent = `ã‚ˆã†ã“ãã€${user.name} ã•ã‚“ (${user.email})`;
          
          // ã‚»ãƒƒã‚·ãƒ§ãƒ³æ®‹ã‚Šæ™‚é–“ã‚’è¡¨ç¤º
          updateRemainingTime();
          setInterval(updateRemainingTime, 30000); // 30ç§’ã”ã¨ã«æ›´æ–°
        }
      }
      
      function updateRemainingTime() {
        const remaining = auth.getRemainingTime();
        const minutes = Math.floor(remaining / (1000 * 60));
        if (minutes <= 5) {
          userInfo.innerHTML += ` <small style="color: #dc2626;">(ã‚»ãƒƒã‚·ãƒ§ãƒ³æ®‹ã‚Š: ${minutes}åˆ†)</small>`;
        }
      }
      
      // ã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆ
      signoutBtn.addEventListener('click', () => {
        auth.signOut();
        window.location.reload();
      });
      
      checkAuth();
    </script>
  </body>
</html>
